{"version":3,"file":"static/js/Home-page.900d05f6.chunk.js","mappings":"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","sources":["helpers/toastyOptions.js","pages/HomePage.js","services/moviesApi.js"],"sourcesContent":["export const warningOptions = {\n  position: 'top-right',\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined,\n  theme: 'dark',\n};\n\nexport const errorOptions = {\n  position: 'top-right',\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined,\n  theme: 'dark',\n};\n\nexport const infoOptions = {\n  position: 'top-right',\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined,\n  theme: 'dark',\n};\n","import { useState, useEffect, lazy, Suspense } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport * as API from '../services/moviesApi';\nimport { PREV, NEXT, MOVIES } from '../helpers/constants';\nimport Preloader from '../components/Preloader';\nimport { errorOptions } from '../helpers/toastyOptions';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nconst MoviesList = lazy(() =>\n  import('../components/MoviesList' /* webpackChunkName: \"Movies-list\"*/),\n);\nconst HandlePageSwitch = lazy(() =>\n  import(\n    '../components/HandlePageSwitch' /* webpackChunkName: \"Handle-page-switch\"*/\n  ),\n);\nexport default function HomePage() {\n  const history = useHistory();\n  const location = useLocation();\n  const currentPage = new URLSearchParams(location.search).get('page') ?? 1;\n  const [movies, setMovies] = useState([]);\n  const [page, setPage] = useState(currentPage);\n  const [totalPages, setTotalPages] = useState(0);\n  useEffect(() => {\n    API.fetchTrendingMoviesByPage(page)\n      .then(data => {\n        const { results, total_pages } = data;\n        if (!results) {\n          toast.error('No such results!', errorOptions);\n          return;\n        }\n        setMovies(results);\n        setTotalPages(total_pages);\n      })\n      .catch(error => {\n        toast.error('No images', errorOptions);\n        console.log('error on catch: ', error);\n      });\n  }, [page]);\n  const pushToHistory = value => {\n    history.push({ ...location, search: `page=${value}` });\n  };\n  const handleButtonClick = event => {\n    const { name } = event.currentTarget;\n    if (name === PREV && page > 1) {\n      setPage(state => Number(state) - 1);\n      pushToHistory(Number(page) - 1);\n    }\n    if (name === NEXT && page !== totalPages) {\n      setPage(state => Number(state) + 1);\n      pushToHistory(Number(page) + 1);\n    }\n  };\n  return (\n    <div>\n      <Suspense fallback={<Preloader />}>\n        <MoviesList movies={movies} url={`${MOVIES}/`} />\n        {movies.length > 1 && (\n          <HandlePageSwitch\n            onClick={handleButtonClick}\n            page={page}\n            totalPages={totalPages}\n          />\n        )}\n      </Suspense>\n      <ToastContainer\n        position=\"top-right\"\n        autoClose={3000}\n        hideProgressBar={false}\n        newestOnTop\n        closeOnClick\n        rtl={false}\n        pauseOnFocusLoss\n        pauseOnHover\n        draggable\n        draggablePercent={60}\n      />\n    </div>\n  );\n}\n","import axios from 'axios';\nexport const BASE_URL = 'https://api.themoviedb.org/3/';\nconst API_KEY = 'f6f92051b45422d9426f457ad6610127';\nconst API_YOUTUBE_KEY = 'f6f92051b45422d9426f457ad6610127';\nasync function fetchWithErrorhandling(url = '', config = {}) {\n  if (config.hasQuery) {\n    const response = await axios.get(url, config);\n    return response.status === 200 && response.data.results.length !== 0\n      ? response.data\n      : Promise.reject(new Error(console.log('Not found by query')));\n  }\n  const response = await axios.get(url, config);\n  return response.status === 200\n    ? response.data\n    : Promise.reject(new Error(console.log('Not found')));\n}\nexport function fetchTrendingMovies() {\n  return fetchWithErrorhandling(\n    `${BASE_URL}trending/all/week?api_key=${API_KEY}`,\n  );\n}\nexport function fetchTrendingMoviesByPage(page) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}trending/all/week?api_key=${API_KEY}&page=${page}`,\n  );\n}\nexport function fetchMoviesBySearch(page, query) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}search/movie?api_key=${API_KEY}&query=${query}&page=${page}&include_adult=false`,\n    { hasQuery: true },\n  );\n}\nexport function fetchMovieDetails(id) {\n  return fetchWithErrorhandling(`${BASE_URL}movie/${id}?api_key=${API_KEY}`);\n}\nexport function fetchMovieCredits(id) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}movie/${id}/credits?api_key=${API_KEY}`,\n  );\n}\nexport function fetchMovieReviews(id) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}movie/${id}/reviews?api_key=${API_KEY}`,\n  );\n}\nexport function fetchTrailer({ id }) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}movie/${id}/videos?api_key=${API_YOUTUBE_KEY}&language=en-US`,\n  );\n}\n"],"names":["warningOptions","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","errorOptions","infoOptions","MoviesList","lazy","HandlePageSwitch","HomePage","history","useHistory","location","useLocation","currentPage","URLSearchParams","search","get","useState","movies","setMovies","page","setPage","totalPages","setTotalPages","useEffect","API","then","data","results","total_pages","toast","catch","error","console","log","pushToHistory","value","push","Suspense","fallback","url","MOVIES","length","onClick","event","name","currentTarget","PREV","state","Number","NEXT","newestOnTop","rtl","pauseOnFocusLoss","draggablePercent","BASE_URL","API_KEY","fetchWithErrorhandling","config","hasQuery","axios","response","status","Promise","reject","Error","fetchTrendingMoviesByPage","fetchMoviesBySearch","query","fetchMovieDetails","id","fetchMovieCredits","fetchMovieReviews","fetchTrailer"],"sourceRoot":""}